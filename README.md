# Telegram Bot - Post Terminal

Telegram –±–æ—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- üì¶ –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–∏—á–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –ø–æ –º–µ—Å—è—Ü–∞–º
- üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- üìÑ –≠–∫—Å–ø–æ—Ä—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –≤ Excel

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- üì¶ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π**:
  - üìÖ –§–∏–ª—å—Ç—Ä –ø–æ –≥–æ–¥—É –∏ –º–µ—Å—è—Ü—É
  - üìã –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥
  - üí∞ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—â–µ–π —Å—É–º–º—ã –ø—Ä–æ–¥–∞–∂
  - üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–∞–∫–ª–∞–¥–Ω–æ–π —Å —Ç–æ–≤–∞—Ä–∞–º–∏
  - üè™ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞–≥–∞–∑–∏–Ω–µ –∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ

## –ö–æ–º–∞–Ω–¥—ã

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ:
- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∏–µ:
- `/admin` - –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- `/stats` - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏:

1. **`get_all_sales_invoices_summary()`** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–¥–∫–∏ –≤—Å–µ—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö:
   - –ö–æ–¥ –Ω–∞–∫–ª–∞–¥–Ω–æ–π
   - –î–∞—Ç–∞/–≤—Ä–µ–º—è
   - –ú–∞–≥–∞–∑–∏–Ω/—Å–∫–ª–∞–¥  
   - –°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –ü–æ–∫—É–ø–∞—Ç–µ–ª—å
   - –û–±—â–∞—è —Å—É–º–º–∞ –ø—Ä–æ–¥–∞–∂–∏

2. **`get_sales_document_details(sales_id)`** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –Ω–∞–∫–ª–∞–¥–Ω–æ–π:
   - –ö–æ–¥ —Ç–æ–≤–∞—Ä–∞ –∏ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ü–µ–Ω–∞
   - –°—É–º–º–∞ –ø–æ –ø–æ–∑–∏—Ü–∏–∏
   - –î–∞—Ç–∞/–≤—Ä–µ–º—è –∏ –º–∞–≥–∞–∑–∏–Ω

### –°–æ—Å—Ç–æ—è–Ω–∏—è (FSM)
- `GetPhone` - –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `AdminInvoicesFilter` - –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:
  - `year` - –≤—ã–±–æ—Ä –≥–æ–¥–∞
  - `month` - –≤—ã–±–æ—Ä –º–µ—Å—è—Ü–∞  
  - `invoices_list` - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
  - `invoice_details` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –Ω–∞–∫–ª–∞–¥–Ω—ã–µ, –∫–æ–Ω—Ç–∞–∫—Ç—ã
- –ê–¥–º–∏–Ω—Å–∫–∏–µ: –º–µ–Ω—é, –≤—ã–±–æ—Ä –≥–æ–¥–∞/–º–µ—Å—è—Ü–∞, —Å–ø–∏—Å–æ–∫ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö, –¥–µ—Ç–∞–ª–∏

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å: `python bot.py`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
‚îú‚îÄ‚îÄ‚îÄlogs # logs folder
‚îî‚îÄ‚îÄ‚îÄtgbot
    ‚îú‚îÄ‚îÄ‚îÄfilters
    ‚îú‚îÄ‚îÄ‚îÄhandlers
    ‚îú‚îÄ‚îÄ‚îÄkeyboards
    ‚îú‚îÄ‚îÄ‚îÄmiddlewares
    ‚îú‚îÄ‚îÄ‚îÄmisc # misc stuff
    ‚îú‚îÄ‚îÄ‚îÄmodels # database models
    ‚îú‚îÄ‚îÄ‚îÄservices # services
    ‚îú‚îÄ‚îÄ‚îÄconfig.py # config
    ‚îî‚îÄ‚îÄ‚îÄstates.py # states
```


#### Files:

* The `tgbot` package is the root package for the bot, and it contains sub-packages for filters, handlers, and middlewares.

* The `filters` package contains classes that define custom filters for the bot's message handlers.

* The `handlers` package contains classes that define the bot's message handlers, which specify the actions to take in response to incoming messages.

* The `middlewares` package contains classes that define custom middlewares for the bot's dispatcher, which can be used to perform additional processing on incoming messages.

* The `models` package contains database models.

* The `services` package contains services.


Simple template for bots written on [aiogram](https://github.com/aiogram/aiogram).

### Setting up


#### Preparations

* Clone this repo via `https://github.com/jakha921/aiogram3-template.git`

* Create virtual environment: `python -m venv venv`
* Make **venv** your source: `source ./venv/bin/activate` (Linux) or `.\venv\Scripts\activate (Windows)`
* Install requirements: `pip install -r requirements.txt`


### Deployment

* Copy `.env.example` to `.env` and set your variables.

* Run bot: `python bot.py`


### Useful

**Commands:**
* `/start` - Start the bot and get a welcome message. if the user is not in the database, it will be added.
* `/stats` - Get the number of users in the database work only for admin.

**Aiogram**

* Docs: https://docs.aiogram.dev/en/latest/
* Stable version: https://docs.aiogram.dev/en/stable/install.html
* Community: https://t.me/aiogram
* UZ Community: https://t.me/aiogram_uz
* Source code: https://github.com/aiogram/aiogram



